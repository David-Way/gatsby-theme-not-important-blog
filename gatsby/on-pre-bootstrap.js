const fs = require("fs");

module.exports = async ({ reporter }) => {
  const dataPath = "src/posts";
  if (!fs.existsSync(dataPath)) {
    reporter.info(`@davidway/gatsby-theme-not-important-blog: creating the ${dataPath} directory`);
    fs.mkdirSync(dataPath);
    fs.writeFileSync(`${dataPath}/example-post.mdx`, exampleFileContent, function (err) {
      if (err) throw err;
      console.log('Example post created successfully.');
    });
  }
};

const exampleFileContent = new Uint8Array(Buffer.from(
`---
date: 2020-12-12
title: Example post
tags:
- One
- Two
---
  
This file was generated by the @davidway/gatsby-theme-not-important-blog package on initial install and can be deleted or modified.
`));